<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>v1z3r Documentation</title><meta name="description" content="Professional VJ application documentation"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="5"/><link rel="preload" href="/v1z3r/_next/static/css/153da9a2def341d6.css" as="style" crossorigin=""/><link rel="stylesheet" href="/v1z3r/_next/static/css/153da9a2def341d6.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/v1z3r/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/v1z3r/_next/static/chunks/webpack-6ab14961875832d5.js" defer="" crossorigin=""></script><script src="/v1z3r/_next/static/chunks/framework-bcaea2e08c6b85c1.js" defer="" crossorigin=""></script><script src="/v1z3r/_next/static/chunks/main-d52cd178aa53a3f9.js" defer="" crossorigin=""></script><script src="/v1z3r/_next/static/chunks/pages/_app-dff0f9ead6e7cd1e.js" defer="" crossorigin=""></script><script src="/v1z3r/_next/static/chunks/490-2688d12715088d66.js" defer="" crossorigin=""></script><script src="/v1z3r/_next/static/chunks/399-f8b2a132b7b55267.js" defer="" crossorigin=""></script><script src="/v1z3r/_next/static/chunks/pages/developer-ae8f9515ccdab605.js" defer="" crossorigin=""></script><script src="/v1z3r/_next/static/KicVsaiqjCnmJmbYwMUMt/_buildManifest.js" defer="" crossorigin=""></script><script src="/v1z3r/_next/static/KicVsaiqjCnmJmbYwMUMt/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="min-h-screen flex flex-col"><header class="bg-vj-dark/80 backdrop-blur-md border-b border-gray-800 sticky top-0 z-50"><nav class="container mx-auto px-4 py-4"><div class="flex items-center justify-between"><a class="flex items-center space-x-2" href="/v1z3r/"><div class="w-10 h-10 bg-gradient-to-br from-vj-primary to-vj-accent rounded-lg flex items-center justify-center"><span class="text-white font-bold text-xl">V</span></div><span class="text-xl font-bold gradient-text">v1z3r Docs</span></a><div class="hidden md:flex items-center space-x-6"><a class="nav-link " href="/v1z3r/">Home</a><a class="nav-link " href="/v1z3r/getting-started/">Getting Started</a><a class="nav-link " href="/v1z3r/features/">Features</a><a class="nav-link " href="/v1z3r/manual/">Manual</a><a class="nav-link " href="/v1z3r/shortcuts/">Shortcuts</a><a class="nav-link " href="/v1z3r/api/">API</a><a class="nav-link active" href="/v1z3r/developer/">Developer</a><a href="https://github.com/your-username/v1z3r" target="_blank" rel="noopener noreferrer" class="nav-link">GitHub</a></div><button class="md:hidden text-white"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div></nav></header><main class="flex-1"><div style="opacity:0;transform:translateY(20px) translateZ(0)"><div class="container mx-auto px-4 py-16 max-w-4xl"><div style="opacity:0;transform:translateY(20px) translateZ(0)"><h1 class="text-4xl md:text-5xl font-bold mb-8">Developer <span class="gradient-text">Guide</span></h1><p class="text-xl text-gray-400 mb-12">v1z3rの開発環境構築からモジュール開発、デプロイまでの完全ガイド。</p><section class="mb-16"><h2 class="text-3xl font-bold mb-8">開発環境のセットアップ</h2><div class="card mb-6"><h3 class="text-xl font-semibold mb-4">必要なツール</h3><ul class="space-y-2 text-gray-400"><li>• Node.js v18+ (nvm推奨)</li><li>• Yarn v1.22+</li><li>• Git</li><li>• VSCode (推奨エディタ)</li><li>• AWS CLI (インフラ開発用)</li></ul></div><div class="card mb-6"><h3 class="text-xl font-semibold mb-4">VSCode拡張機能</h3><pre class="rounded-lg" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-json" style="white-space:pre;color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#9cdcfe">&quot;recommendations&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span>
</span><span>    </span><span class="token" style="color:#ce9178">&quot;dbaeumer.vscode-eslint&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#ce9178">&quot;esbenp.prettier-vscode&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#ce9178">&quot;bradlc.vscode-tailwindcss&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#ce9178">&quot;prisma.prisma&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#ce9178">&quot;ms-vscode.vscode-typescript-next&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#ce9178">&quot;styled-components.vscode-styled-components&quot;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">]</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span></code></pre></div></section><section class="mb-16"><h2 class="text-3xl font-bold mb-8">プロジェクト構造</h2><div class="card"><pre class="rounded-lg" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-bash" style="white-space:pre;color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>v1z3r/
</span><span>├── src/                    </span><span class="token" style="color:#6a9955"># メインアプリケーション</span><span>
</span><span>│   ├── components/         </span><span class="token" style="color:#6a9955"># UIコンポーネント</span><span>
</span><span>│   ├── pages/             </span><span class="token" style="color:#6a9955"># Next.jsページ</span><span>
</span><span>│   ├── store/             </span><span class="token" style="color:#6a9955"># Zustand状態管理</span><span>
</span><span>│   └── utils/             </span><span class="token" style="color:#6a9955"># ユーティリティ関数</span><span>
</span><span>├── modules/               </span><span class="token" style="color:#6a9955"># モジュラーアーキテクチャ</span><span>
</span><span>│   ├── visual-renderer/   </span><span class="token" style="color:#6a9955"># レンダリングエンジン</span><span>
</span><span>│   ├── vj-controller/     </span><span class="token" style="color:#6a9955"># コントロールUI</span><span>
</span><span>│   ├── sync-core/         </span><span class="token" style="color:#6a9955"># WebSocket同期</span><span>
</span><span>│   ├── preset-storage/    </span><span class="token" style="color:#6a9955"># AWS統合</span><span>
</span><span>│   └── lyrics-engine/     </span><span class="token" style="color:#6a9955"># 音声認識</span><span>
</span><span>├── infra/                 </span><span class="token" style="color:#6a9955"># AWS CDKインフラ</span><span>
</span>│   └── cdk/              
<span>├── tests/                 </span><span class="token" style="color:#6a9955"># テストスイート</span><span>
</span>│   ├── unit/             
<!-- -->│   ├── integration/      
<!-- -->│   └── e2e/              
<span>└── docs/                  </span><span class="token" style="color:#6a9955"># ドキュメント</span></code></pre></div></section><section class="mb-16"><h2 class="text-3xl font-bold mb-8">モジュール開発</h2><div class="card mb-6"><h3 class="text-xl font-semibold mb-4">新しいモジュールの作成</h3><pre class="rounded-lg mb-4" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-bash" style="white-space:pre;color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955"># モジュールディレクトリを作成</span><span>
</span><span></span><span class="token" style="color:#dcdcaa">mkdir</span><span> -p modules/my-module
</span><span></span><span class="token" style="color:#4ec9b0">cd</span><span> modules/my-module
</span>
<span></span><span class="token" style="color:#6a9955"># package.jsonを作成</span><span>
</span><span></span><span class="token" style="color:#dcdcaa">yarn</span><span> init -y</span></code></pre><h4 class="font-medium mb-2 mt-6">モジュールのpackage.json</h4><pre class="rounded-lg" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-json" style="white-space:pre;color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#9cdcfe">&quot;name&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;@vj-app/my-module&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#9cdcfe">&quot;version&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;1.0.0&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#9cdcfe">&quot;main&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;dist/index.js&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#9cdcfe">&quot;types&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;dist/index.d.ts&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#9cdcfe">&quot;scripts&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#9cdcfe">&quot;build&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;tsc&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#9cdcfe">&quot;test&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;jest&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#9cdcfe">&quot;dev&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;tsc --watch&quot;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#9cdcfe">&quot;peerDependencies&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#9cdcfe">&quot;react&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;^18.2.0&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#9cdcfe">&quot;three&quot;</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;^0.157.0&quot;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span></code></pre></div><div class="card"><h3 class="text-xl font-semibold mb-4">モジュール間の依存関係</h3><pre class="rounded-lg" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955">// modules/my-module/src/index.ts</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span class="token"> </span><span class="token" style="color:#9cdcfe">VisualRenderer</span><span class="token"> </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;@vj-app/visual-renderer&#x27;</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span class="token"> </span><span class="token" style="color:#9cdcfe">SyncClient</span><span class="token"> </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;@vj-app/sync-core&#x27;</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#c586c0">export</span><span> </span><span class="token" style="color:#569CD6">class</span><span> </span><span class="token" style="color:#4ec9b0">MyModule</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">private</span><span> renderer</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#4ec9b0">VisualRenderer</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">private</span><span> sync</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#4ec9b0">SyncClient</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#dcdcaa">constructor</span><span class="token" style="color:#d4d4d4">(</span><span>config</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#4ec9b0">MyModuleConfig</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">this</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">renderer</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">VisualRenderer</span><span class="token" style="color:#d4d4d4">(</span><span>config</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">canvas</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">this</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">sync</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">SyncClient</span><span class="token" style="color:#d4d4d4">(</span><span>config</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">syncUrl</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span>  </span><span class="token" style="color:#569CD6">async</span><span> </span><span class="token" style="color:#dcdcaa">init</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#569CD6">this</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">renderer</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">init</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#569CD6">this</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">sync</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">connect</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span></code></pre></div></section><section class="mb-16"><h2 class="text-3xl font-bold mb-8">テスト戦略</h2><div class="card mb-6"><h3 class="text-xl font-semibold mb-4">ユニットテスト</h3><pre class="rounded-lg" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955">// src/utils/__tests__/audioAnalyzer.test.ts</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span class="token"> </span><span class="token" style="color:#9cdcfe">AudioAnalyzer</span><span class="token"> </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;../audioAnalyzer&#x27;</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#dcdcaa">describe</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&#x27;AudioAnalyzer&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">let</span><span> analyzer</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#4ec9b0">AudioAnalyzer</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#dcdcaa">beforeEach</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    analyzer </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">AudioAnalyzer</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#dcdcaa">test</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&#x27;detects beat correctly&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> mockData </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token known-class-name" style="color:#4ec9b0">Float32Array</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">1024</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">fill</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">0.8</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> result </span><span class="token" style="color:#d4d4d4">=</span><span> analyzer</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">analyze</span><span class="token" style="color:#d4d4d4">(</span><span>mockData</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>    
<span>    </span><span class="token" style="color:#dcdcaa">expect</span><span class="token" style="color:#d4d4d4">(</span><span>result</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">beatDetected</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">toBe</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#dcdcaa">expect</span><span class="token" style="color:#d4d4d4">(</span><span>result</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">average</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">toBeCloseTo</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">0.8</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span></code></pre></div><div class="card"><h3 class="text-xl font-semibold mb-4">E2Eテスト</h3><pre class="rounded-lg" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955">// tests/e2e/vj-workflow.spec.ts</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span class="token"> test</span><span class="token" style="color:#d4d4d4">,</span><span class="token"> expect </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;@playwright/test&#x27;</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#dcdcaa">test</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&#x27;complete VJ workflow&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#569CD6">async</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span> page </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#6a9955">// アプリケーションを起動</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">await</span><span> page</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">goto</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&#x27;http://localhost:3000&#x27;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>  
<span>  </span><span class="token" style="color:#6a9955">// VJアプリケーションを開始</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">await</span><span> page</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">click</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&#x27;text=Launch VJ Application&#x27;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>  
<span>  </span><span class="token" style="color:#6a9955">// エフェクトを選択</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">await</span><span> page</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">click</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&#x27;[data-testid=&quot;effects-tab&quot;]&#x27;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">await</span><span> page</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">click</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&#x27;[data-testid=&quot;effect-particles&quot;]&#x27;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>  
<span>  </span><span class="token" style="color:#6a9955">// パラメータを調整</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">await</span><span> page</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">locator</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&#x27;[data-testid=&quot;intensity-slider&quot;]&#x27;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">fill</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&#x27;0.8&#x27;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>  
<span>  </span><span class="token" style="color:#6a9955">// ビジュアルが表示されることを確認</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#dcdcaa">expect</span><span class="token" style="color:#d4d4d4">(</span><span>page</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">locator</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&#x27;canvas&#x27;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">toBeVisible</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span></code></pre></div></section><section class="mb-16"><h2 class="text-3xl font-bold mb-8">AWS展開</h2><div class="card mb-6"><h3 class="text-xl font-semibold mb-4">CDKスタック構成</h3><pre class="rounded-lg" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955">// infra/cdk/lib/vj-unified-stack.ts</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span class="token"> </span><span class="token" style="color:#c586c0">as</span><span class="token"> cdk</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;aws-cdk-lib&#x27;</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span class="token"> </span><span class="token" style="color:#c586c0">as</span><span class="token"> s3</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;aws-cdk-lib/aws-s3&#x27;</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span class="token"> </span><span class="token" style="color:#c586c0">as</span><span class="token"> dynamodb</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;aws-cdk-lib/aws-dynamodb&#x27;</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#c586c0">import</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span class="token"> </span><span class="token" style="color:#c586c0">as</span><span class="token"> apigateway</span><span> </span><span class="token" style="color:#c586c0">from</span><span> </span><span class="token" style="color:#ce9178">&#x27;aws-cdk-lib/aws-apigateway&#x27;</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#c586c0">export</span><span> </span><span class="token" style="color:#569CD6">class</span><span> </span><span class="token" style="color:#4ec9b0">VjUnifiedStack</span><span> </span><span class="token" style="color:#569CD6">extends</span><span> </span><span class="token" style="color:#4ec9b0">cdk</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access" style="color:#4ec9b0">Stack</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#dcdcaa">constructor</span><span class="token" style="color:#d4d4d4">(</span><span>scope</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#4ec9b0">Construct</span><span class="token" style="color:#d4d4d4">,</span><span> id</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">string</span><span class="token" style="color:#d4d4d4">,</span><span> props</span><span class="token" style="color:#d4d4d4">?</span><span class="token" style="color:#d4d4d4">:</span><span> cdk</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access" style="color:#4ec9b0">StackProps</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">super</span><span class="token" style="color:#d4d4d4">(</span><span>scope</span><span class="token" style="color:#d4d4d4">,</span><span> id</span><span class="token" style="color:#d4d4d4">,</span><span> props</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>    </span><span class="token" style="color:#6a9955">// S3バケット（静的ホスティング）</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> websiteBucket </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">s3</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">Bucket</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#569CD6">this</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&#x27;WebsiteBucket&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      websiteIndexDocument</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&#x27;index.html&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      publicReadAccess</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">true</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>    </span><span class="token" style="color:#6a9955">// DynamoDB（プリセット保存）</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> presetsTable </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">dynamodb</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">Table</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#569CD6">this</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&#x27;PresetsTable&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      partitionKey</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> name</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&#x27;userId&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> type</span><span class="token" style="color:#d4d4d4">:</span><span> dynamodb</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access" style="color:#4ec9b0">AttributeType</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#9cdcfe">STRING</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      sortKey</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> name</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&#x27;presetId&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> type</span><span class="token" style="color:#d4d4d4">:</span><span> dynamodb</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access" style="color:#4ec9b0">AttributeType</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#9cdcfe">STRING</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>    </span><span class="token" style="color:#6a9955">// API Gateway（WebSocket）</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> webSocketApi </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">apigateway</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">WebSocketApi</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#569CD6">this</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">&#x27;WebSocketApi&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      connectRouteOptions</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> integration</span><span class="token" style="color:#d4d4d4">:</span><span> connectIntegration </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      disconnectRouteOptions</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> integration</span><span class="token" style="color:#d4d4d4">:</span><span> disconnectIntegration </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span></code></pre></div><div class="card"><h3 class="text-xl font-semibold mb-4">デプロイコマンド</h3><pre class="rounded-lg" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-bash" style="white-space:pre;color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955"># 開発環境へのデプロイ</span><span>
</span><span></span><span class="token" style="color:#dcdcaa">yarn</span><span> infra:dev
</span>
<span></span><span class="token" style="color:#6a9955"># ステージング環境</span><span>
</span><span></span><span class="token" style="color:#dcdcaa">yarn</span><span> infra:staging
</span>
<span></span><span class="token" style="color:#6a9955"># 本番環境</span><span>
</span><span></span><span class="token" style="color:#dcdcaa">yarn</span><span> infra:prod
</span>
<span></span><span class="token" style="color:#6a9955"># スタックの削除</span><span>
</span><span></span><span class="token" style="color:#dcdcaa">yarn</span><span> infra:destroy</span></code></pre></div></section><section class="mb-16"><h2 class="text-3xl font-bold mb-8">パフォーマンス最適化</h2><div class="card"><h3 class="text-xl font-semibold mb-4">メモリ管理</h3><pre class="rounded-lg" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955">// src/utils/memoryManager.ts</span><span>
</span><span></span><span class="token" style="color:#c586c0">export</span><span> </span><span class="token" style="color:#569CD6">class</span><span> </span><span class="token" style="color:#4ec9b0">MemoryManager</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">private</span><span> pools</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token known-class-name" style="color:#4ec9b0">Map</span><span class="token" style="color:#d4d4d4">&lt;</span><span class="token" style="color:#ce9178">string</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">any</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">&gt;</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token known-class-name" style="color:#4ec9b0">Map</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#6a9955">// オブジェクトプールの実装</span><span>
</span><span>  </span><span class="token generic-function" style="color:#dcdcaa">getFromPool</span><span class="token generic-function generic" style="color:#d4d4d4">&lt;</span><span class="token generic-function generic" style="color:#9cdcfe">T</span><span class="token generic-function generic" style="color:#d4d4d4">&gt;</span><span class="token" style="color:#d4d4d4">(</span><span>type</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">string</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token function-variable" style="color:#dcdcaa">factory</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> </span><span class="token" style="color:#9cdcfe">T</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#9cdcfe">T</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> pool </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">this</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">pools</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">get</span><span class="token" style="color:#d4d4d4">(</span><span>type</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">||</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>    
<span>    </span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>pool</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color:#d4d4d4">&gt;</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      </span><span class="token" style="color:#c586c0">return</span><span> pool</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">pop</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#c586c0">as</span><span> </span><span class="token" style="color:#9cdcfe">T</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span>
</span>    
<span>    </span><span class="token" style="color:#c586c0">return</span><span> </span><span class="token" style="color:#dcdcaa">factory</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span>  </span><span class="token" style="color:#dcdcaa">returnToPool</span><span class="token" style="color:#d4d4d4">(</span><span>type</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">string</span><span class="token" style="color:#d4d4d4">,</span><span> obj</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">any</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> pool </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">this</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">pools</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">get</span><span class="token" style="color:#d4d4d4">(</span><span>type</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">||</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    pool</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">push</span><span class="token" style="color:#d4d4d4">(</span><span>obj</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">this</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">pools</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">set</span><span class="token" style="color:#d4d4d4">(</span><span>type</span><span class="token" style="color:#d4d4d4">,</span><span> pool</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span>  </span><span class="token" style="color:#6a9955">// Three.jsジオメトリの再利用</span><span>
</span><span>  </span><span class="token" style="color:#dcdcaa">reuseGeometry</span><span class="token" style="color:#d4d4d4">(</span><span>geometry</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#9cdcfe">THREE</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access" style="color:#4ec9b0">BufferGeometry</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    geometry</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">dispose</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">this</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">returnToPool</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&#x27;geometry&#x27;</span><span class="token" style="color:#d4d4d4">,</span><span> geometry</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span></code></pre></div></section><section><h2 class="text-3xl font-bold mb-8">コントリビューション</h2><div class="card"><h3 class="text-xl font-semibold mb-4">プルリクエストのガイドライン</h3><ol class="space-y-3 text-gray-400"><li><strong class="text-white">1. Issue作成</strong><p>まず関連するIssueを作成し、実装方針を議論します。</p></li><li><strong class="text-white">2. ブランチ作成</strong><p><code class="text-vj-accent">feature/your-feature-name</code>形式でブランチを作成。</p></li><li><strong class="text-white">3. テスト作成</strong><p>新機能には必ずテストを追加してください（カバレッジ70%以上）。</p></li><li><strong class="text-white">4. コミット規約</strong><p>Conventional Commits形式：<code class="text-vj-primary">feat:</code>, <code class="text-vj-secondary">fix:</code>, <code class="text-vj-accent">docs:</code></p></li><li><strong class="text-white">5. PR作成</strong><p>テンプレートに従って詳細な説明を記載。</p></li></ol><div class="mt-6 p-4 bg-gray-900 rounded-lg"><p class="text-sm text-gray-300"><strong>注意:</strong> GitHub Actionsが無効の場合は、<code class="text-vj-accent">./scripts/manual-ci-check.sh</code>でローカルCI検証を実行してください。</p></div></div></section></div></div></div></main><footer class="bg-vj-dark border-t border-gray-800 py-8 mt-16"><div class="container mx-auto px-4"><div class="grid grid-cols-1 md:grid-cols-3 gap-8"><div><h3 class="text-lg font-semibold mb-4 gradient-text">v1z3r</h3><p class="text-gray-400">Professional VJ application with AI-powered visual effects and real-time audio analysis.</p></div><div><h3 class="text-lg font-semibold mb-4">Quick Links</h3><ul class="space-y-2"><li><a class="text-gray-400 hover:text-white" href="/v1z3r/getting-started/">Getting Started</a></li><li><a class="text-gray-400 hover:text-white" href="/v1z3r/features/">Features</a></li><li><a class="text-gray-400 hover:text-white" href="/v1z3r/shortcuts/">Shortcuts</a></li></ul></div><div><h3 class="text-lg font-semibold mb-4">Resources</h3><ul class="space-y-2"><li><a href="https://github.com/your-username/v1z3r" class="text-gray-400 hover:text-white">GitHub</a></li><li><a class="text-gray-400 hover:text-white" href="/v1z3r/api/">API Reference</a></li><li><a class="text-gray-400 hover:text-white" href="/v1z3r/developer/">Developer Guide</a></li></ul></div></div><div class="mt-8 pt-8 border-t border-gray-800 text-center text-gray-400"><p>© 2025 v1z3r. Built with Next.js and Tailwind CSS.</p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{}},"page":"/developer","query":{},"buildId":"KicVsaiqjCnmJmbYwMUMt","assetPrefix":"/v1z3r","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>